## Source Asci Text Generator - http://www.patorjk.com/software/taag/#p=display&h=0&v=0&c=bash&w=%23&f=Banner4&t=KLIPPER ##
####################################################################################################
####################################################################################################
#   .oooooo.    oooooooooooo ooooo      ooo oooooooooooo ooooooooo.         .o.       ooooo        #
#  d8P'  `Y8b   `888'     `8 `888b.     `8' `888'     `8 `888   `Y88.      .888.      `888'        #
# 888            888          8 `88b.    8   888          888   .d88'     .8"888.      888         #
# 888            888oooo8     8   `88b.  8   888oooo8     888ooo88P'     .8' `888.     888         #
# 888     ooooo  888    "     8     `88b.8   888    "     888`88b.      .88ooo8888.    888         #
# `88.    .88'   888       o  8       `888   888       o  888  `88b.   .8'     `888.   888       o #
#  `Y8bood8P'   o888ooooood8 o8o        `8  o888ooooood8 o888o  o888o o88o     o8888o o888ooooood8 #
####################################################################################################
####################################################################################################
#
#[include fluidd.cfg]
[include mainsail.cfg]
# Latest 4max config
#####################################################################################
# info sources setup and Calibration
# https://www.klipper3d.org/Pressure_Advance.html
# https://github.com/Klipper3d/klipper/blob/master/docs/Rotation_Distance.md/using-a-gear_ratio
# https://github.com/Klipper3d/klipper/issues/1410
# https://3dprinterly.com/extruder-tension-guide-for-3d-printing/
# https://github.com/Klipper3d/klipper/issues/1444
# https://www.klipper3d.org/Config_Reference.html/extruder
#
# tmc driver settings guide for better stepper controll and less heat
# https://github-wiki-see.page/m/MakerBogans/docs/wiki/TMC-Driver-Tuning

#####################################################################################
#infos
#ABS flow#extrusion multi von 96%/0.96
#####################################################################################

# SKR v1.3 Configuration for Chiron
# X, Y, Z, E  
#####################################################################################
[force_move]
enable_force_move: true
#   Set to true to enable FORCE_MOVE and SET_KINEMATIC_POSITION
#   extended G-Code commands. The default is false.

[exclude_object]
# Enables support to exclude or cancel individual objects during the printing process.

[pause_resume]
recover_velocity: 50.
#   When capture/restore is enabled, the speed at which to return to
#   the captured position (in mm/s). Default is 50.0 mm/s.



#####################################################################################
[printer]
kinematics: cartesian
max_velocity: 300 #300
max_accel: 2900 #2000
max_accel_to_decel: 1450
max_z_velocity: 30
max_z_accel: 80
square_corner_velocity: 10.0


########################## Configuration of the primary micro-controller. #########################
[mcu]
serial: /dev/serial/by-id/usb-Klipper_lpc1768_17100013C81848AFE3CC185DC62000F5-if00

baud: 250000
restart_method: command
#rpi_usb
#command

########################## Configuration Virtual SD #########################
[virtual_sdcard]
path: /home/dietpi/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

###########################################################################################
###########################################################################################
# oooooooooo.   ooooo  .oooooo..o ooooooooo.   ooooo              .o.       oooooo   oooo #
# `888'   `Y8b  `888' d8P'    `Y8 `888   `Y88. `888'             .888.       `888.   .8'  #
#  888      888  888  Y88bo.       888   .d88'  888             .8"888.       `888. .8'   #
#  888      888  888   `"Y8888o.   888ooo88P'   888            .8' `888.       `888.8'    #
#  888      888  888       `"Y88b  888          888           .88ooo8888.       `888'     #
#  888     d88'  888  oo     .d8P  888          888       o  .8'     `888.       888      #
# o888bood8P'   o888o 8""88888P'  o888o        o888ooooood8 o88o     o8888o     o888o     #
###########################################################################################
###########################################################################################

########################## Configuration Display. #########################
# 128x64 Full Graphic Creality CR10 # ENDER 3 stockdisplay
#[display]
#lcd_type: st7920
#cs_pin: P1.19
#sclk_pin: P1.21
#sid_pin: P1.23
#encoder_pins: ^P1.18, ^P1.20
#click_pin: !P0.28
#[output_pin beeper]
#pin: P1.30

#[display_status]
#progress: The progress value of the last M73 G-Code command (or virtual_sdcard.progress if no recent M73 received).
#message: The message contained in the last M117 G-Code command.


##############################################################################################################################################################
##############################################################################################################################################################
#  .oooooo..o ooooooooooooo oooooooooooo ooooooooo.   ooooooooo.   oooooooooooo ooooooooo.                        ooooooooooooo ooo        ooooo   .oooooo.  #
# d8P'    `Y8 8'   888   `8 `888'     `8 `888   `Y88. `888   `Y88. `888'     `8 `888   `Y88.                      8'   888   `8 `88.       .888'  d8P'  `Y8b #
# Y88bo.           888       888          888   .d88'  888   .d88'  888          888   .d88'          88               888       888b     d'888  888         #
#  `"Y8888o.       888       888oooo8     888ooo88P'   888ooo88P'   888oooo8     888ooo88P'           88               888       8 Y88. .P  888  888         #
#      `"Y88b      888       888    "     888          888          888    "     888`88b.         8888888888           888       8  `888'   888  888         #
# oo     .d8P      888       888       o  888          888          888       o  888  `88b.           88               888       8    Y     888  `88b    ooo #
# 8""88888P'      o888o     o888ooooood8 o888o        o888o        o888ooooood8 o888o  o888o          88              o888o     o8o        o888o  `Y8bood8P' #
##############################################################################################################################################################
##############################################################################################################################################################

########################## Configuration Stepper # Axis. #########################
[stepper_x]
step_pin: P2.2
dir_pin: !P2.6
enable_pin: !P2.1 
#step_distance: .0125
microsteps: 32
rotation_distance: 40 
# 200 * 16 # 100# 160
full_steps_per_rotation: 200
endstop_pin: !P1.29 
position_min: 0
position_endstop: 0
position_max: 416
homing_speed: 150.0

[tmc2209 stepper_x]
uart_pin: P1.17
run_current: 1.0
stealthchop_threshold: 60
#diag_pin:

##########################

[stepper_y]
# Eingesetzt 2208 Eryone V1.2 
# configuriert  - UART - 1#16 microsteps
step_pin: P0.19
dir_pin: P0.20
enable_pin: !P2.8
#step_distance: .0125
microsteps: 32
rotation_distance: 32 
full_steps_per_rotation: 200
endstop_pin: !P1.26 
#war P1.27
position_min: 0
position_endstop: 0
position_max: 420
homing_speed: 150.0
homing_retract_dist: 0.0

[tmc2209 stepper_y]
uart_pin: P1.15
run_current: 01.00
stealthchop_threshold: 60
#diag_pin:

##########################

[stepper_z]
step_pin: P0.22
dir_pin: P2.11
enable_pin: !P0.21
microsteps: 32
rotation_distance: 8
full_steps_per_rotation: 200
## if bltuoche is used - endstop_pin: probe:z_virtual_endstop
endstop_pin: probe:z_virtual_endstop
position_max: 447
homing_speed: 30.0

[tmc2209 stepper_z]
uart_pin: P1.10
run_current: 01.00
stealthchop_threshold: 200
#diag_pin:

############

[stepper_z1]
step_pin: P0.1
dir_pin: P0.0
enable_pin: !P0.10
microsteps: 32
rotation_distance: 8
full_steps_per_rotation: 200
## if bltuoche is used - endstop_pin: probe:z_virtual_endstop
endstop_pin: probe:z_virtual_endstop

[tmc2209 stepper_z1]
uart_pin: P1.1
run_current: 01.00
stealthchop_threshold: 200
#diag_pin:

################################################################################################################
################################################################################################################
# oooooooooooo ooooooo  ooooo ooooooooooooo ooooooooo.   ooooo     ooo oooooooooo.   oooooooooooo ooooooooo.   #
# `888'     `8  `8888    d8'  8'   888   `8 `888   `Y88. `888'     `8' `888'   `Y8b  `888'     `8 `888   `Y88. #
#  888            Y888..8P         888       888   .d88'  888       8   888      888  888          888   .d88' #
#  888oooo8        `8888'          888       888ooo88P'   888       8   888      888  888oooo8     888ooo88P'  #
#  888    "       .8PY888.         888       888`88b.     888       8   888      888  888    "     888`88b.    #
#  888       o   d8'  `888b        888       888  `88b.   `88.    .8'   888     d88'  888       o  888  `88b.  #
# o888ooooood8 o888o  o88888o     o888o     o888o  o888o    `YbodP'    o888bood8P'   o888ooooood8 o888o  o888o #
################################################################################################################
################################################################################################################


########################## Configuration Extruder. #########################
[extruder]
step_pin: P2.13
dir_pin: !P0.11
enable_pin: !P2.12
microsteps: 32
gear_ratio: 3:1
full_steps_per_rotation: 200
rotation_distance: 23.0476
nozzle_diameter: 0.800
filament_diameter: 1.750
heater_pin: P2.5
sensor_type: PT1000
sensor_pin: P0.24
control = pid
pid_kp = 38.069
pid_ki = 2.488
pid_kd = 145.613
min_temp: 0
max_temp: 290

max_extrude_only_distance: 500.0
min_extrude_temp: 5

sensor_pin: P0.24
#   Analog input pin connected to the sensor. This parameter must be
#   provided.
pullup_resistor: 4700
#   The resistance (in ohms) of the pullup attached to the sensor. The
#   default is 4700 ohms.

##### Pid tune Nozzle heater. ####


##### pressure_advance. ####
#pressure_advance = 0.3345

# PETG - Devil Design - nozzle 0.80 250c 100mm/s

[tmc2209 extruder]
uart_pin: P1.8
run_current: 0.800
stealthchop_threshold: 9999
#diag_pin:

[firmware_retraction]
retract_length: 0.75
#   The length of filament (in mm) to retract when G10 is activated,
#   and to unretract when G11 is activated (but see
#   unretract_extra_length below). The default is 0 mm.
retract_speed: 50
#   The speed of retraction, in mm/s. The default is 20 mm/s.
unretract_extra_length: 0
#   The length (in mm) of *additional* filament to add when
#   unretracting.
unretract_speed: 10
#   The speed of unretraction, in mm/s. The default is 10 mm/s.

##########################################################################################################################################################
##########################################################################################################################################################
# ooooo ooooo      ooo ooooooooo.   ooooo     ooo ooooooooooooo          .oooooo..o ooooo   ooooo       .o.       ooooooooo.   oooooooooooo ooooooooo.   #
# `888' `888b.     `8' `888   `Y88. `888'     `8' 8'   888   `8         d8P'    `Y8 `888'   `888'      .888.      `888   `Y88. `888'     `8 `888   `Y88. #
#  888   8 `88b.    8   888   .d88'  888       8       888              Y88bo.       888     888      .8"888.      888   .d88'  888          888   .d88' #
#  888   8   `88b.  8   888ooo88P'   888       8       888               `"Y8888o.   888ooooo888     .8' `888.     888ooo88P'   888oooo8     888ooo88P'  #
#  888   8     `88b.8   888          888       8       888      8888888      `"Y88b  888     888    .88ooo8888.    888          888    "     888`88b.    #
#  888   8       `888   888          `88.    .8'       888              oo     .d8P  888     888   .8'     `888.   888          888       o  888  `88b.  #
# o888o o8o        `8  o888o           `YbodP'        o888o             8""88888P'  o888o   o888o o88o     o8888o o888o        o888ooooood8 o888o  o888o #
##########################################################################################################################################################
##########################################################################################################################################################

########################## Configuration Input Shaper . #######################
#[mcu rpi]
#serial: /tmp/klipper_host_mcu

#[adxl345]
#cs_pin: rpi:None

#[resonance_tester]
#accel_chip: adxl345
#probe_points: 
#    107.5, 107.5, 20  
## set probe_points to center of Printbed

[input_shaper]

## Calculating the best input shaper parameters for x axis
## Fitted shaper 'zv' frequency = 29.6 Hz (vibrations = 11.7%, smoothing ~= 0.176)
## To avoid too much smoothing with 'zv', suggested max_accel <= 3200 mm#sec^2
## Fitted shaper 'mzv' frequency = 30.4 Hz (vibrations = 2.4%, smoothing ~= 0.220)
## To avoid too much smoothing with 'mzv', suggested max_accel <= 2700 mm#sec^2
## Fitted shaper 'ei' frequency = 29.8 Hz (vibrations = 2.4%, smoothing ~= 0.363)
## To avoid too much smoothing with 'ei', suggested max_accel <= 1600 mm#sec^2
## Fitted shaper '2hump_ei' frequency = 44.6 Hz (vibrations = 0.0%, smoothing ~= 0.271)
## To avoid too much smoothing with '2hump_ei', suggested max_accel <= 2100 mm#sec^2
## Fitted shaper '3hump_ei' frequency = 53.4 Hz (vibrations = 0.0%, smoothing ~= 0.287)
## To avoid too much smoothing with '3hump_ei', suggested max_accel <= 2000 mm#sec^2
## Recommended shaper_type_x = 2hump_ei, shaper_freq_x = 44.6 Hz

shaper_type_x: mzv
shaper_freq_x: 30.4

## Fitted shaper 'zv' frequency = 42.8 Hz (vibrations = 11.6%, smoothing ~= 0.089)
## To avoid too much smoothing with 'zv', suggested max_accel <= 7100 mm#sec^2
## Fitted shaper 'mzv' frequency = 37.2 Hz (vibrations = 1.2%, smoothing ~= 0.147)
## To avoid too much smoothing with 'mzv', suggested max_accel <= 4100 mm#sec^2
## Fitted shaper 'ei' frequency = 43.6 Hz (vibrations = 0.0%, smoothing ~= 0.169)
## To avoid too much smoothing with 'ei', suggested max_accel <= 3500 mm#sec^2
## Fitted shaper '2hump_ei' frequency = 54.2 Hz (vibrations = 0.0%, smoothing ~= 0.184)
## To avoid too much smoothing with '2hump_ei', suggested max_accel <= 3300 mm#sec^2
## Fitted shaper '3hump_ei' frequency = 64.8 Hz (vibrations = 0.0%, smoothing ~= 0.195)
## To avoid too much smoothing with '3hump_ei', suggested max_accel <= 3100 mm#sec^2
## Recommended shaper_type_y = mzv, shaper_freq_y = 37.2 Hz

shaper_type_y: mzv
shaper_freq_y: 37.2


##################################################################################
##################################################################################
# ooooo   ooooo   .oooooo.   ooo        ooooo ooooo ooooo      ooo   .oooooo.    #
# `888'   `888'  d8P'  `Y8b  `88.       .888' `888' `888b.     `8'  d8P'  `Y8b   #
#  888     888  888      888  888b     d'888   888   8 `88b.    8  888           #
#  888ooooo888  888      888  8 Y88. .P  888   888   8   `88b.  8  888           #
#  888     888  888      888  8  `888'   888   888   8     `88b.8  888     ooooo #
#  888     888  `88b    d88'  8    Y     888   888   8       `888  `88.    .88'  #
# o888o   o888o  `Y8bood8P'  o8o        o888o o888o o8o        `8   `Y8bood8P'   #
##################################################################################
##################################################################################

########################## Configuration Homing. #########################
#[homing_override]
#set_position_z: 10
#axes: z
#gcode:
#    G90
#    G28 X0 Y0 F2300
#    G1 X107.5 Y107.5 F6000
#    G28 Z0
#    G1 Z20 F1300
########################## Configuration Bltouch. #########################
#[bltouch]
#sensor_pin: P1.26
#control_pin: P2.0
#pin_move_time: 1.0
#pin_up_reports_not_triggered: True
#pin_up_touch_mode_reports_triggered: False
#x_offset: 3.1
#y_offset: 27.5
#z_offset = 0.090
#speed: 5.0
#samples: 2
#sample_retract_dist: 2.0
#samples_result: average
#samples_tolerance_retries: 2

[safe_z_home]
home_xy_position: 200, 200
#   A X, Y coordinate (e.g. 100, 100) where the Z homing should be
#   performed. This parameter must be provided.
speed: 50.0
#   Speed at which the toolhead is moved to the safe Z home
#   coordinate. The default is 50 mm/s
z_hop: 20
#   Distance (in mm) to lift the Z axis prior to homing. This is
#   applied to any homing command, even if it doesn't home the Z axis.
#   If the Z axis is already homed and the current Z position is less
#   than z_hop, then this will lift the head to a height of z_hop. If
#   the Z axis is not already homed the head is lifted by z_hop.
#   The default is to not implement Z hop.
z_hop_speed: 15.0
#   Speed (in mm/s) at which the Z axis is lifted prior to homing. The
#   default is 15 mm/s.
#move_to_previous: False
#   When set to True, the X and Y axes are reset to their previous
#   positions after Z axis homing. The default is False.

[bltouch]
sensor_pin: P1.28
#   Pin connected to the BLTouch sensor pin. Most BLTouch devices
#   require a pullup on the sensor pin (prefix the pin name with "^").
#   This parameter must be provided.
control_pin: P2.0
#   Pin connected to the BLTouch control pin. This parameter must be
#   provided.
#pin_move_time: 0.680
#   The amount of time (in seconds) to wait for the BLTouch pin to
#   move up or down. The default is 0.680 seconds.
#stow_on_each_sample: False
#   This determines if Klipper should command the pin to move up
#   between each probe attempt when performing a multiple probe
#   sequence. Read the directions in docs/BLTouch.md before setting
#   this to False. The default is True.
#probe_with_touch_mode: True
#   If this is set to True then Klipper will probe with the device in
#   "touch_mode". The default is False (probing in "pin_down" mode).
#pin_up_reports_not_triggered: True
#   Set if the BLTouch consistently reports the probe in a "not
#   triggered" state after a successful "pin_up" command. This should
#   be True for all genuine BLTouch devices. Read the directions in
#   docs/BLTouch.md before setting this to False. The default is True.
#pin_up_touch_mode_reports_triggered: True
#   Set if the BLTouch consistently reports a "triggered" state after
#   the commands "pin_up" followed by "touch_mode". This should be
#   True for all genuine BLTouch devices. Read the directions in
#   docs/BLTouch.md before setting this to False. The default is True.
#set_output_mode:
#   Request a specific sensor pin output mode on the BLTouch V3.0 (and
#   later). This setting should not be used on other types of probes.
#   Set to "5V" to request a sensor pin output of 5 Volts (only use if
#   the controller board needs 5V mode and is 5V tolerant on its input
#   signal line). Set to "OD" to request the sensor pin output use
#   open drain mode. The default is to not request an output mode.
x_offset: 2
y_offset: -27
z_offset = 3.399
#z_offset = 3.499
#peed: 5
#lift_speed:
#samples: 2
#sample_retract_dist: 10.0
samples_result:  average
#samples_tolerance:
samples_tolerance_retries: 2
#   See the "probe" section for information on these parameters.


#############################################################################################
#############################################################################################
#  .oooooo..o oooooooooooo ooooo      ooo  .oooooo..o   .oooooo.   ooooooooo.    .oooooo..o #
# d8P'    `Y8 `888'     `8 `888b.     `8' d8P'    `Y8  d8P'  `Y8b  `888   `Y88. d8P'    `Y8 #
# Y88bo.       888          8 `88b.    8  Y88bo.      888      888  888   .d88' Y88bo.      #
#  `"Y8888o.   888oooo8     8   `88b.  8   `"Y8888o.  888      888  888ooo88P'   `"Y8888o.  #
#      `"Y88b  888    "     8     `88b.8       `"Y88b 888      888  888`88b.         `"Y88b #
# oo     .d8P  888       o  8       `888  oo     .d8P `88b    d88'  888  `88b.  oo     .d8P #
# 8""88888P'  o888ooooood8 o8o        `8  8""88888P'   `Y8bood8P'  o888o  o888o 8""88888P'  #
#############################################################################################
#############################################################################################

########################## Configuration of Detachable z probe ##############
#[probe]
#pin = !P1.28
#x_offset: 0.0
#y_offset: 0.0
#z_offset = 0.00
#speed: 5.0
#samples: 2
#sample_retract_dist: 2.0
#samples_result: average
#samples_tolerance_retries: 2

########################## Configuration Filament Sensors. #########################

#-#-#-#-#-#-#-#-# Configuration Filament Width Sensor. #-#-#-#-#-#-#-#-#
#[filament_switch_sensor e0_sensor]
#switch_pin: !P1.24
#The following information is available in filament_switch_sensor some_name objects:

#enabled: Returns True if the switch sensor is currently enabled.
#filament_detected: Returns True if the sensor is in a triggered state.
#filament_motion_sensor¶
#The following information is available in filament_motion_sensor some_name objects:

#enabled: Returns True if the motion sensor is currently enabled.
#filament_detected: Returns True if the sensor is in a triggered state.

#-#-#-#-#-#-#-#-# Configuration Filament Width Sensor. #-#-#-#-#-#-#-#-#
#[hall_filament_width_sensor]
#adc1:
#adc2:
#   Analog input pins connected to the sensor. These parameters must
#   be provided.
#cal_dia1: 1.50
#cal_dia2: 2.00
#   The calibration values (in mm) for the sensors. The default is
#   1.50 for cal_dia1 and 2.00 for cal_dia2.
#raw_dia1: 9500
#raw_dia2: 10500
#   The raw calibration values for the sensors. The default is 9500
#   for raw_dia1 and 10500 for raw_dia2.
#default_nominal_filament_diameter: 1.75
#   The nominal filament diameter. This parameter must be provided.
#max_difference: 0.200
#   Maximum allowed filament diameter difference in millimeters (mm).
#   If difference between nominal filament diameter and sensor output
#   is more than +- max_difference, extrusion multiplier is set back
#   to %100. The default is 0.200.
#measurement_delay: 70
#   The distance from sensor to the melting chamber/hot-end in
#   millimeters (mm). The filament between the sensor and the hot-end
#   will be treated as the default_nominal_filament_diameter. Host
#   module works with FIFO logic. It keeps each sensor value and
#   position in an array and POP them back in correct position. This
#   parameter must be provided.
#enable: False
#   Sensor enabled or disabled after power on. The default is to
#   disable.
#measurement_interval: 10
#   The approximate distance (in mm) between sensor readings. The
#   default is 10mm.
#logging: False
#   Out diameter to terminal and klipper.log can be turn on|of by
#   command.
#min_diameter: 1.0
#   Minimal diameter for trigger virtual filament_switch_sensor.
#use_current_dia_while_delay: False
#   Use the current diameter instead of the nominal diameter while
#   the measurement delay has not run through.
#pause_on_runout:
#runout_gcode:
#insert_gcode:
#event_delay:
#pause_delay:
#   See the "filament_switch_sensor" section for a description of the
#   above parameters.


###########################################
###########################################
# oooooooooo.  oooooooooooo oooooooooo.   #
# `888'   `Y8b `888'     `8 `888'   `Y8b  #
#  888     888  888          888      888 #
#  888oooo888'  888oooo8     888      888 #
#  888    `88b  888    "     888      888 #
#  888    .88P  888       o  888     d88' #
# o888bood8P'  o888ooooood8 o888bood8P'   #
###########################################
###########################################


########################## Configuration bed heater. #########################
[heater_bed]
heater_pin: P2.4
sensor_type: EPCOS 100K B57560G104F
#pullup_resistor: 4700
sensor_pin: P0.23
min_temp: 0
max_temp: 110
control = pid
pid_kp = 73.311
pid_ki = 2.361
pid_kd = 569.080
min_temp: 0
max_temp: 100



########################## Adjusting bed leveling screws  #########################
#Manual bed level asistent
#Move Nozzel as close as possible to bed screws
#ad position to screw1,screw2,screw3,screw4
# start command -> BED_SCREWS_ADJUST
[bed_screws]
screw1: 2, 0
screw1_name: Front Left
screw2: 413, 0
screw2_name: Front Right
screw3: 2, 2416
screw3_name: Back Left
screw4: 413, 413
screw4_name: Back Right

########################## Configuration bed mesh. #########################
[bed_mesh]
speed: 120
horizontal_move_z: 5
mesh_min: 2, 2
mesh_max: 413, 413
probe_count: 10, 10
mesh_pps: 2, 3
algorithm: bicubic
bicubic_tension: 0.2

###########################################################
###########################################################
# oooooooooooo       .o.       ooooo      ooo  .oooooo..o #
# `888'     `8      .888.      `888b.     `8' d8P'    `Y8 #
#  888             .8"888.      8 `88b.    8  Y88bo.      #
#  888oooo8       .8' `888.     8   `88b.  8   `"Y8888o.  #
#  888    "      .88ooo8888.    8     `88b.8       `"Y88b #
#  888          .8'     `888.   8       `888  oo     .d8P #
# o888o        o88o     o8888o o8o        `8  8""88888P'  #
###########################################################
###########################################################

########################## Configuration Fans. #########################

[heater_fan Coldend_fan]
heater: extruder
shutdown_speed: 0
cycle_time: 0.010
kick_start_time: 1.00
heater_temp: 50
fan_speed: 1.0
pin: P2.3 #Fanport 

[fan]
#heater: extruder
#shutdown_speed: 0
#cycle_time: 0.010
kick_start_time: 1.00
#heater_temp: 50
#fan_speed: 1.0
pin: P2.7 #HE0 - Heater = on mainboard


#######################################################################################
#######################################################################################
# ooo        ooooo       .o.         .oooooo.   ooooooooo.     .oooooo.    .oooooo..o #
# `88.       .888'      .888.       d8P'  `Y8b  `888   `Y88.  d8P'  `Y8b  d8P'    `Y8 #
#  888b     d'888      .8"888.     888           888   .d88' 888      888 Y88bo.      #
#  8 Y88. .P  888     .8' `888.    888           888ooo88P'  888      888  `"Y8888o.  #
#  8  `888'   888    .88ooo8888.   888           888`88b.    888      888      `"Y88b #
#  8    Y     888   .8'     `888.  `88b    ooo   888  `88b.  `88b    d88' oo     .d8P #
# o8o        o888o o88o     o8888o  `Y8bood8P'  o888o  o888o  `Y8bood8P'  8""88888P'  #
#######################################################################################
#######################################################################################



########################## Configuration GCODE Macros. #########################
#    BED_MESH_CLEAR
#	SET_VELOCITY_LIMIT ACCEL_TO_DECEL=1450
#	SET_VELOCITY_LIMIT ACCEL=2900
#	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY=5

[gcode_macro M666]
gcode:
	SET_VELOCITY_LIMIT ACCEL_TO_DECEL=1450.000000
	SET_VELOCITY_LIMIT ACCEL=2900.000000
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY=10
	G92 E0 ;Reset Extruder
	G1 Z2.0 F300 ;Move Z Axis up
	G1 X1 Y5 Z0.28 F5000.0 ;Move to start position
	G1 X1 Y105.0 Z0.28 F1500.0 E15 ;Draw the first line
	G1 X1.4 Y105.0 Z0.28 F5000.0 ;Move to side a little
	G1 X1.4 Y5 Z0.28 F1500.0 E30 ;Draw the second line
	G92 E0 ;Reset Extruder
	G1 Z2.0 F300 ;Move Z Axis up
	
	
[gcode_macro M999]
gcode:
	G1 E-2 F2700 ;Retract a bit
	G1 Z277 F2300 ;bed goes down
	G1 X0 Y0 F2300 ;Wipe out
	M106 S0 ;Turn-off fan
	M104 S0 ;Turn-off hotend
	M140 S0 ;Turn-off bed
	G90 ;Absolute positionning
	M84 X Y Z E ;Disable all steppers
	BED_MESH_CLEAR

	
#Create bed mesh macro
[gcode_macro G29]
gcode =
	G0 Z5 F1200
	G28
	BED_MESH_CLEAR
	BED_MESH_CALIBRATE
	BED_MESH_PROFILE SAVE=NEW_BEDMESH
	SAVE_CONFIG
	FIRMWARE_RESTART


[gcode_macro Manual_Bed_Level]
gcode =
    BED_SCREWS_ADJUST


[gcode_macro ACCELEROMETER_CHECK]
gcode =
    ACCELEROMETER_QUERY


[gcode_macro ACCELEROMETER_BASELINE_NOISE]
gcode =
	MEASURE_AXES_NOISE


[gcode_macro Input_Shaper_auto_calibration]
gcode =
	SHAPER_CALIBRATE

[gcode_macro PressureAdvanced_Calibrition_settings]
gcode =
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY=1 ACCEL=500
	TUNING_TOWER COMMAND=SET_PRESSURE_ADVANCE PARAMETER=ADVANCE START=0 FACTOR=.005

[gcode_macro E100MM_EXTRUDE]
gcode:
	G92 E0 ;Reset Extruder
	G1 E100 F300

[gcode_macro Filament_10MM_EXTRUDE]
gcode:
	G92 E0 ;Reset Extruder
	G1 E10 F300



[gcode_macro E100MM_RETRACT]
gcode:
	G92 E0 ;Reset Extruder
	G1 E-100 F300
	
[gcode_macro E10MM_RETRACT]
gcode:
	G92 E0 ;Reset Extruder
	G1 E-10 F300

	
[gcode_macro CANCEL_PRINT]
rename_existing: BASE_CANCEL_PRINT
gcode:
    TURN_OFF_HEATERS
    CLEAR_PAUSE
    SDCARD_RESET_FILE
    BASE_CANCEL_PRINT
    _ADD_PRINT_TIME
    _SD_PRINT_STATS R='done'
    _SD_PRINTER_STATS

[gcode_macro PAUSE]
rename_existing: BASE_PAUSE
gcode:
    ##### set defaults #####
    {% set x = params.X|default(230) %}      #edit to your park position
    {% set y = params.Y|default(230) %}      #edit to your park position
    {% set z = params.Z|default(50)|float %} #edit to your park position
    {% set e = params.E|default(1) %}        #edit to your retract length
    ##### calculate save lift position #####
    {% set max_z = printer.toolhead.axis_maximum.z|float %}
    {% set act_z = printer.toolhead.position.z|float %}
    {% set lift_z = z|abs %}
    {% if act_z < (max_z - lift_z) %}
        {% set z_safe = lift_z %}
    {% else %}
        {% set z_safe = max_z - act_z %}
    {% endif %}
    ##### end of definitions #####
    SAVE_GCODE_STATE NAME=PAUSE_state
    BASE_PAUSE
    G91
    G1 E-{e} F2100
    G1 Z{z_safe}
    G90
    G1 X{x} Y{y} F6000


[gcode_macro RESUME]
rename_existing: BASE_RESUME
gcode:
    ##### set defaults #####
    {% set e = params.E|default(1) %} #edit to your retract length
    G91
    G1 E{e} F2100
    G90
    RESTORE_GCODE_STATE NAME=PAUSE_state MOVE=1
    BASE_RESUME
	

[gcode_macro M486]
gcode:
  # Parameters known to M486 are as follows:
  #   [C<flag>] Cancel the current object
  #   [P<index>] Cancel the object with the given index
  #   [S<index>] Set the index of the current object.
  #       If the object with the given index has been canceled, this will cause
  #       the firmware to skip to the next object. The value -1 is used to
  #       indicate something that isn’t an object and shouldn’t be skipped.
  #   [T<count>] Reset the state and set the number of objects
  #   [U<index>] Un-cancel the object with the given index. This command will be
  #       ignored if the object has already been skipped

  {% if 'exclude_object' not in printer %}
    {action_raise_error("[exclude_object] is not enabled")}
  {% endif %}

  {% if 'T' in params %}
    EXCLUDE_OBJECT RESET=1

    {% for i in range(params.T | int) %}
      EXCLUDE_OBJECT_DEFINE NAME={i}
    {% endfor %}
  {% endif %}

  {% if 'C' in params %}
    EXCLUDE_OBJECT CURRENT=1
  {% endif %}

  {% if 'P' in params %}
    EXCLUDE_OBJECT NAME={params.P}
  {% endif %}

  {% if 'S' in params %}
    {% if params.S == '-1' %}
      {% if printer.exclude_object.current_object %}
        EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
      {% endif %}
    {% else %}
      EXCLUDE_OBJECT_START NAME={params.S}
    {% endif %}
  {% endif %}

  {% if 'U' in params %}
    EXCLUDE_OBJECT RESET=1 NAME={params.U}
  {% endif %}
 

###########################################################################################################
###########################################################################################################
# oooooooooo.  oooooooooooo oooooooooo.           ooo        ooooo oooooooooooo  .oooooo..o ooooo   ooooo #
# `888'   `Y8b `888'     `8 `888'   `Y8b          `88.       .888' `888'     `8 d8P'    `Y8 `888'   `888' #
#  888     888  888          888      888          888b     d'888   888         Y88bo.       888     888  #
#  888oooo888'  888oooo8     888      888          8 Y88. .P  888   888oooo8     `"Y8888o.   888ooooo888  #
#  888    `88b  888    "     888      888 8888888  8  `888'   888   888    "         `"Y88b  888     888  #
#  888    .88P  888       o  888     d88'          8    Y     888   888       o oo     .d8P  888     888  #
# o888bood8P'  o888ooooood8 o888bood8P'           o8o        o888o o888ooooood8 8""88888P'  o888o   o888o #
###########################################################################################################
###########################################################################################################



##########################  BedMeshes. #########################



##############################################################################################################################################
##############################################################################################################################################
#  .oooooo..o       .o.       oooooo     oooo oooooooooooo           .oooooo.     .oooooo.   ooooo      ooo oooooooooooo ooooo   .oooooo.    #
# d8P'    `Y8      .888.       `888.     .8'  `888'     `8          d8P'  `Y8b   d8P'  `Y8b  `888b.     `8' `888'     `8 `888'  d8P'  `Y8b   #
# Y88bo.          .8"888.       `888.   .8'    888                 888          888      888  8 `88b.    8   888          888  888           #
#  `"Y8888o.     .8' `888.       `888. .8'     888oooo8            888          888      888  8   `88b.  8   888oooo8     888  888           #
#      `"Y88b   .88ooo8888.       `888.8'      888    "    8888888 888          888      888  8     `88b.8   888    "     888  888     ooooo #
# oo     .d8P  .8'     `888.       `888'       888       o         `88b    ooo  `88b    d88'  8       `888   888          888  `88.    .88'  #
# 8""88888P'  o88o     o8888o       `8'       o888ooooood8          `Y8bood8P'   `Y8bood8P'  o8o        `8  o888o        o888o  `Y8bood8P'   #
##############################################################################################################################################
########################## SAVE_CONFIG - config-values generated by klipper ##################################################################

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.

